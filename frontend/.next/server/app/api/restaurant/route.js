(()=>{var e={};e.id=531,e.ids=[531],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14985:e=>{"use strict";e.exports=require("dns")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29327:(e,r,t)=>{"use strict";t.d(r,{h:()=>p,s:()=>c});var s=t(34717),o=t(89579),a=t(67556);let i=(0,o.Dk)().length?(0,o.Dk)()[0]:(0,o.Wp)({apiKey:"AIzaSyBY6tYhLSBAoWlNpTG-VzFm-qFgdiG9elE",authDomain:"forkly-da5a7.firebaseapp.com",projectId:"forkly-da5a7",storageBucket:"forkly-da5a7.firebasestorage.app",messagingSenderId:"738393752123",appId:"1:738393752123:web:9985da4d74ba5d7f1f921e"});(0,a.xI)(i),new a.HF;let n=(0,s.aU)(i);var u=t(23870);function c(e){let r=void 0!==e.rating&&null!==e.rating?e.rating/2:0,t=e.price?"$".repeat(e.price):void 0,s=e.categories&&e.categories.length>0?e.categories[0].name:"Uncategorized",o=e.photos&&e.photos.length>0?`${e.photos[0].prefix}original${e.photos[0].suffix}`:e.categories?.[0]?.icon?`${e.categories[0].icon.prefix}bg_64${e.categories[0].icon.suffix}`:"/placeholder.png";return{id:e.fsq_id??(0,u.A)(),name:e.name,rating:r,price:t,category:s,photoUrl:o}}async function p(e){let r=process.env.FOURSQUARE_API_KEY;if(!r)throw console.error("FOURSQUARE_API_KEY is not set in environment variables."),Error("Server API key not configured for Foursquare.");let t=(0,s.H9)(n,"restaurants",e),o=await (0,s.x7)(t);if(o.exists()){let r=o.data();if(r.lastFetched&&Date.now()-r.lastFetched<6048e5)return console.log(`[Firebase Cache Hit] Returning business ${e} from cache.`),r}console.log(`[Firebase Cache Miss/Stale] Fetching business ${e} from Foursquare.`);let a=`https://places-api.foursquare.com/places/${e}`;try{let o=await fetch(a,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${r}`,"X-Places-Api-Version":"2025-06-17"}});if(!o.ok){let e=await o.json();console.error("Foursquare API Business Details Error Response:",e);let r=e.message||`Unknown Foursquare API error (Status: ${o.status})`;throw Error(`Foursquare API Error: ${r}`)}let i=await o.json(),n=c(i);return await (0,s.BN)(t,{...n,lastFetched:Date.now()}),console.log(`[Firebase Cache Set] Business ${e} cached.`),n}catch(t){console.error(`Error fetching or transforming business ${e}:`,t);let r=t instanceof Error?t.message:String(t);throw Error(`Failed to fetch business details from Foursquare. Details: ${r}`)}}},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37943:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>h,routeModule:()=>p,serverHooks:()=>g,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>d});var s={};t.r(s),t.d(s,{GET:()=>c});var o=t(96559),a=t(48088),i=t(37719),n=t(32190),u=t(29327);async function c(e){let{searchParams:r}=new URL(e.url),t=r.get("id");if(!t)return n.NextResponse.json({error:"Missing ID"},{status:400});try{let e=await (0,u.h)(t);return n.NextResponse.json(e)}catch(e){return console.error(e),n.NextResponse.json({error:"Failed to fetch business"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/restaurant/route",pathname:"/api/restaurant",filename:"route",bundlePath:"app/api/restaurant/route"},resolvedPagePath:"D:\\forkly\\src\\app\\api\\restaurant\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:d,serverHooks:g}=p;function h(){return(0,i.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:d})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,580,397],()=>t(37943));module.exports=s})();